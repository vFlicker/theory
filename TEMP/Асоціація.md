# Асоціація

Асоціація — це структурний зв'язок між елементами моделі, що описує набір зв'язків між об'єктами. Традиційно в полях об'єкта можуть зберігатися як звичайні змінні стандартних типів, а й інші об'єкти. А ці об'єкти можуть у свою чергу зберігати якісь інші об'єкти тощо, утворюючи дерево (іноді граф) об'єктів. Це ставлення називається асоціацією. Вона у свою чергу буває двох видів

-   Агрегація — особливий різновид асоціації, що представляє структурний зв'язок цілого з його частинами. За умовчанням агрегацією називають агрегацію за посиланням, тобто коли час існування класів, що містяться, не залежить від часу існування класу, що їх містить. Якщо контейнер буде знищено, його вміст — ні

```js
/**
 * У цьому прикладі ми створимо об’єкт, який агрегує масив
 * продуктів і обчислює загальну ціну цих продуктів.
 */
class Product {
    constructor(name, price) {
        this.name = name;
        this.price = price;
    }
}

class ShoppingCart {
    constructor() {
        this.products = [];
    }

    addProduct(product) {
        this.products.push(product);
    }

    getTotalPrice() {
        let totalPrice = 0;
        for (let i = 0; i < this.products.length; i++) {
            totalPrice += this.products[i].price;
        }
        return totalPrice;
    }
}

const cart = new ShoppingCart();
cart.addProduct(new Product("Shoes", 50));
cart.addProduct(new Product("Socks", 10));
cart.addProduct(new Product("Shirt", 30));

console.log(`Total price: $${cart.getTotalPrice()}`);
```

-   Композиція — суворіший варіант агрегації. Відома також як агрегація за значенням. Композиція — це форма агрегації з чітко вираженими відносинами володіння та збігом часу життя елементів та цілого. Композиція має жорстку залежність часу існування екземплярів класу контейнера та екземплярів класів, що містяться. Якщо контейнер буде знищено, то його вміст буде також знищено

```js
/**
 * У цьому прикладі ми створимо об’єкт, який складається
 * з об’єкта Shape з об’єктом Color для створення
 * кольорової форми.
 */
class Shape {
    draw() {
        console.log("Drawing shape...");
    }
}

class Color {
    constructor(color) {
        this.color = color;
    }

    setColor(shape) {
        console.log(`Setting color to ${this.color}...`);
        this.shape = shape;
    }

    draw() {
        this.shape.draw();
        console.log(`Coloring shape ${this.color}...`);
    }
}

const shape = new Shape();
const coloredShape = new Color("red");
coloredShape.setColor(shape);
coloredShape.draw();
```
