# Тести

Тести — допомагають переконатися, що програми виглядають і працюють так, як описано в технічному завданні

## Тестування буває

-   Ручне — тестування проводиться людиною
-   Автоматичне — тестування проводиться програмами

## Переваги автоматизованого тестування

-   Знаходження помилок на етапі розробки
-   Підвищення якості коду
-   Жива документація проекту
-   Скорочення часу тестування
-   Підвищення якості тестування
-   Регресія програми (впевненість, що новий код не зламав старий)

## Ізоляція тестової одиниці

### Mock (імітації)

Об'єкти з методами або окремі методи, які при їх виклику поводяться так, як потрібно для тестування певної функції. Як правило, вони не несуть у собі складної логіки, а лише імітують виклик іншої функції, яку не потрібно тестувати в цьому тесті. Незважаючи на те, що для тесту використовується мінімальний набір даних, інтерфейс має залишатися правильним. Не слід опускати обов'язковий параметр лише тому, що він не використовується в тесті або робити його необов'язковим для тестування

### Stub (заглушки)

Об'єкти, що імітують структури даних. Їхня мета абсолютно така сама, як і у моків, з тією лише різницею, що це просто дані

### Mock functions (spies)

У багатьох інструментах автоматизованого тестування є спеціальні функції-шпигуни. Ці функції відрізняються від моків і стабів, оскільки вони нічого не імітують і не заміщають. Шпигуни викликають вихідний код залежності, при цьому додаючи можливість змінювати результати функції залежності. Вони можуть бути корисні для перевірки параметрів, що передаються в залежну функцію, або підрахунку кількості її викликів

## Підходи автоматизованого тестування

-   Написання компонентів через створення тестів до них
-   Написання тестів на наявні компоненти

### Test Driven Development (Розробка через тестування)

Методологія підходу до написання програм на основі тестів, ключовий момент у розробці через тестування навіть не саме написання тестів до коду, а саме короткі ітерації написання повністю протестованого коду. Спочатку пишуться тест для того, щоб закріпити поведінку програми, а потім пишеться код, на якому тести виконуватимуться без помилок. Розробка ведеться короткими ітераціями за певним алгоритмом

1. Написати тест (тест використовується для опису функціональності, формалізує завдання)
1. Запустити тести та перевірити чи проходять вони перевірки (не повинні)
1. Написати код (код не має бути ідеальним, він просто повинен виконувати завдання)
1. Запустити тести (перевірити чи проходять вони)
1. Оптимізувати код (алгоритми, розташування модулів)
1. Повторити крок 1

#### Behavior-Driven Development (Керована поведінкою розробка)

Набір найкращих практик для написання чудових тестів. BDD можна і потрібно використовувати разом із TDD і методами модульного тестування. Поширеною проблемою поганих модульних тестів є те, що вони занадто покладаються на те, як реалізована тестована функція. Головне правило — ви повинні тестувати не реалізацію, а поведінку

```js
/**
 * Поганий тест.
 *
 * Тест повністю залежить від того факту, що лічильник
 * починається з 0. Той факт, що лічильник починається з 0,
 * є деталлю реалізації, яка не має відношення до поведінки
 * функції tick().
 */
suite("Counter", () => {
    test("tick increases count to 1", () => {
        // arrange (організувати)
        const counter = new Counter();

        // act (діяти)
        counter.tick();

        // assert (стверджувати)
        assert.equal(counter.count, 1);
    });
});

/**
 * Хороший тест.
 *
 * Замість того, щоб покладатися на лічильник, починаючи з 0,
 * ми порівнюємо з counter.count + 1, що має набагато більше
 * сенсу з точки зору перевірки поведінки.
 */
describe("Counter", () => {
    it("should increase count by 1 after calling tick", () => {
        // given (дано)
        const counter = new Counter();
        const expectedCount = counter.count + 1;

        // when (коли)
        counter.tick();

        // then (тоді)
        expect(equal(counter.count)).toBe(expectedCount);
    });
});
```

### Test-Last Development (Тестування потім)

Розробка за принципом написання тестів для готового коду. Після того як код написано, пишуться тести, які перевіряють, чи працює програма так, як задумано

## Література

<a href="https://codeutopia.net/blog/2015/03/01/unit-testing-tdd-and-bdd/">Різниця між Unit-тестами, TDD та BDD</a>

<a href="https://martinfowler.com/articles/practical-test-pyramid.html">The Practical Test Pyramid</a>

<a href="https://medium.com/@eugenkiss/lean-testing-or-why-unit-tests-are-worse-than-you-think-b6500139a009">Економне тестування або чому модульні тести гірші, ніж ви думаєте</a>

<a href="https://kentcdodds.com/blog/static-vs-unit-vs-integration-vs-e2e-tests">Static vs Unit vs Integration vs E2E Testing for Frontend Apps</a>
