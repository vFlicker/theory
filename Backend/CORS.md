## CORS

CORS (Cross-Origin Resource Sharing / спільне використання ресурсів між джерелами) — технологія сучасних браузерів, яка дозволяє надати веб-сторінкам доступ до ресурсів іншого домену. З точки зору браузера запити до іншого джерела бувають двох видів «прості» та всі інші. Основна їх відмінність полягає в тому, що «прості» запити з давніх-давен виконувались з використанням тегів `<form>` або `<script>`, у той час як «непрості» довгий час були неможливі для браузерів. Практична різниця полягає в тому, що «прості» запити надсилаються відразу із заголовком Origin, а для інших браузер робить попередній запит, питаючи дозволу.

### «Прості» запити

-   Метод:
    -   GET
    -   POST
    -   HEAD
-   Заголовки
    -   Accept
    -   Accept-Language
    -   Content-Language
    -   Content-Type зі значенням application/x-www-form-urlencoded, multipart/form-data або text/plain.

### Для «простих» запитів

1. Браузер посилає заголовок Origin із джерелом

    - Для запитів без авторизаційних даних (не надсилаються замовчуванням) сервер повинен встановити
        - Access-Control-Allow-Origin в \* або те саме значення, що і Origin
    - Для запитів з авторизаційними даними сервер має встановити:
        - Access-Control-Allow-Origin у те саме значення, що і Origin
        - Access-Control-Allow-Credentials у true
        - Додатково, щоб дозволити JavaScript доступ до будь-яких заголовків відповіді, крім Cache-Control, Content-Language, Content-Type, Expires Last-Modified або Pragma, сервер повинен перерахувати дозволені в заголовку Access-Control-Expose-Headers

### Для «непростих» запитів перед основним запитом надсилається попереднє запит

1. Браузер надсилає запит OPTIONS на ту саму адресу із заголовками:
    - Access-Control-Request-Method – містить запитуваний метод,
    - Access-Control-Request-Headers – перераховує «непрості» запитувані заголовки.
2. Сервер повинен відповісти зі статусом 200 та заголовками
    - Access-Control-Allow-Methods зі списком дозволених методів,
    - Access-Control-Allow-Headers зі списком дозволених заголовків,
    - Access-Control-Max-Age з кількістю секунд для кешування дозволів
3. Надсилається основний запит, застосовується попередня «проста» схема
