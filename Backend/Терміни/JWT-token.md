## JWT-token

Визначає компактний і самодостатній спосіб безпечної передачі інформації між сторонами як об’єкт JSON. Цю інформацію можна перевірити та довіряти їй, оскільки вона має цифровий підпис

### Коли слід використовувати JWT-token

-   Авторизація — це найпоширеніший сценарій використання JWT. Після входу користувача кожен наступний запит включатиме JWT, що дозволить користувачеві отримати доступ до маршрутів, послуг і ресурсів, які дозволені за допомогою цього маркера
-   Обмін інформацією — веб-токени JSON є хорошим способом безпечної передачі інформації між сторонами. Оскільки JWT можна підписувати, наприклад, за допомогою пари відкритих/приватних ключів, ви можете бути впевнені, що відправники є тими, за кого себе видають. Крім того, оскільки підпис обчислюється за допомогою заголовка та корисного навантаження, ви також можете перевірити, чи вміст не було змінено.

### Структура веб-токена JSON

-   Заголовок — зазвичай складається з двох частин: типу маркера, яким є JWT, і використовуваного алгоритму підпису, наприклад HMAC SHA256 або RSA

```json
{
    "alg": "HS256",
    "typ": "JWT"
}
```

-   Корисне навантаження — заяви про сутність (як правило, користувача)

```json
{
    "sub": "1234567890",
    "name": "John Doe",
    "admin": true
}
```

**Зауважте**, що для підписаних токенів ця інформація, хоча й захищена від підробки, доступна для читання будь-кому. Не розміщуйте секретну інформацію в елементах корисного навантаження або заголовка JWT, якщо вони не зашифровані.

-   Підпис — шоб створити частину підпису, вам потрібно взяти закодований заголовок, закодовану корисну інформацію, секрет, алгоритм, указаний у заголовку, і підписати це. Підпис використовується для перевірки того, що повідомлення не було змінено на шляху, і, у випадку маркерів, підписаних закритим ключем, він також може підтвердити, що відправник JWT є тим, за кого він себе видає

```js
const SECRET_KEY = "cAtwa1kkEy";
const unsignedToken = base64urlEncode(header) + "." + base64urlEncode(payload);
const signature = HMAC - SHA256(unsignedToken, SECRET_KEY);
const token =
    encodeBase64Url(header) +
    "." +
    encodeBase64Url(payload) +
    "." +
    encodeBase64Url(signature);
```
