# Лекція 5

## Мережа

- Сьогодні ми переходимо від написання програм для командного рядка на мові С до веб-додатків, хоч ми і розглянемо нові мови, багато ідей та понять залишаться без змін.

- TCP/IP (протокол керування передаванням та міжмережевий протокол) — два протоколи або правила спілкування комп'ютерів між собою. Сучасний інтернет працює завдяки цим двом протоколам.

- Колись ми відправляли рукописні листи поштою. Ззовні конверта треба було написати адресу, а вона містила таку інформацію, як ім'я, вулиця та місто. Також писали власне ім'я та зворотну адресу.

- Кожна адреса має вказувати на певну будівлю чи місце.

- Наші комп'ютери теж мають індивідуальні адреси, які ідентифікують їх в інтернеті — IP-адреси. У IPv4 або протоколі версії 4, ці адреси є числами у вигляді `#.#.#.#`, чотири числа від 0 до 255, розділені крапками. Для подання кожного числа (з 256 можливими значеннями), нам потрібно 8 бітів, таким чином кожна ІР-адреса складається з 32 бітів. Але з 32 бітами ми можемо подати лише 4 мільярди значень. Оскільки, приладів, підключених до інтернету понад 4 мільярди, світ поступово переходить на новішу версію протоколу — IPv6, яка має 128-бітні адреси.

- Сервер — це комп'ютер, під'єднаний до інтернету, який може слухати та відповідати на повідомлення, надавати багато сервісів, наприклад, веб-сайти та електронна пошта. Для того, щоб показати, що повідомлення призначене для певного сервісу, наприклад, перегляду веб-сторінок, додається до адреси інше число — номер порту. Наприклад, протокол HTTP для перегляду веб-сайтів зазвичай встановлює зв'язок з портом 80. Отже, конверт з повідомленням може мати адресу призначення `1.2.3.4:80` та `5.6.7.8` — зворотну. Є й багато інших складних моментів, але загалом це основи спілкування комп'ютерів у мережі.

- Скажімо, ми хочемо відвідати URL, Uniform Resource Locator (уніфікований локатор ресурсів або адреса ресурсу), як ось цей `http://www.example.com/`. Виявляється, що існує ще одна технологія — DNS, Domain Name System (доменна система імен), яку підтримують багато інтернет-провайдерів та організацій, і яка перетворює доменні імена (`example.com`) на IP-адреси.

  - Існують сотні доменів верхнього рівня (TLD), окрім '.com', наприклад '.net', '.org', '.us', '.uk' тощо.
  - `www` на початку доменного ім'я насправді є піддоменом. І може бути створено багато таких піддоменів, кожен з яких вказує на різний сервер чи ряд серверів. Він не є обов'язковим, а `www` використовується за звичкою. Наприклад, Массачусетський технологічний інститут використовує `web.mit.edu` в якості адреси їхнього головного веб-сайту.
  - `/` у кінці означає, що нам потрібна головна сторінка сайту, яка за замовчуванням буде `index.html`, де `.html` показує, що цей файл написаний мовою HTML, яку ми розглянемо пізніше.

- Коли ми набираємо певну адресу (URL) у браузері, він спочатку використовує доменну систему імен (DNS), щоб знайти IP-адресу для домена, а тоді надсилає запит (у віртуальному конверті) до правильної IP-адреси веб-сайта. Коли сервер за цією адресою дає відповідь, він надсилає нам зміст сторінки у віртуальному конверті з нашою адресою, вказаною як місце призначення.

## HTTP

- HTTP, Hypertext Transfer Protocol (протокол передачі гіпертекстових документів), — це ще один набір правил і угод для спілкування. Люди, наприклад, традиційно тиснуть руки при знайомстві або зустрічі. Коли наш браузер встановлює зв'язок з веб-серверами через HTTP, обидва комп'ютери слідують за протоколом для створення запитів та відповідей.

- Запит веб-сторінки буде виглядати так:

```
GET / HTTP/1.1
Host: www.example.com
...
```

- `GET` — це метод HTTP, що показує, що ми хочемо отримати якийсь ресурс. `/` означає, що ми шукаємо сторінку за замовчуванням, і `HTTP/1.1` показує версію протоколу, яку використовує наш браузер.
- Далі, `Host: www.example.com` додається, оскільки один сервер може слухати та відповідати на запити до багатьох веб-сайтів. Існують ще й інші деталі, що містяться в `...`, щоб допомогти серверу відповісти нам відповідним чином.

- Відповідь серверу може виглядати так:

```
HTTP/1.1 200 OK
Content-Type: text/html
...
```

- По-перше, ми отримуємо назад версію HTTP, `HTTP/1.1`. Тоді, `200` — це числовий код, що означає `OK` — серверу вдалося зрозуміти та відповісти на запит, запит виконаний успішно.

- `Content-Type: text/html` показує, що відповідь подається у текстовому форматі, на мові HTML.

- Ми можемо відкрити браузер Chrome, далі відкрити інструменти розробника таким шляхом: View > Developer > Developer Tools. Відкриється панель:

- Ми можемо натиснути на вкладку Network, і якщо надрукуємо `harvard.edu` у рядку адреси та натиснемо Enter, багато чого станеться дуже швидко. Ми можемо прогорнути догори, натиснути на перший запит `harvard.edu`, і на панелі справа, під “Request Headers” (Заголовки запитів), побачимо, що браузер дійсно відправляє запит, який починається так, як ми очікували:

- Можемо прокрутити нижче і побачити, що заголовки відповідей дещо відрізняються:

- Код відповіді `301` повідомляє “Moved Permanently” (переміщено назавжди). Якщо подивимося на “Location:”, то побачимо, що нове розташування `https://www.harvard.edu`. З’явилося `www`, і використовується інший протокол — HTTPS, який шифруватиме спілкування для кращого захисту.

- Інший код HTTP — `404`, “Not Found” (не знайдено), його ми отримуємо у випадку, якщо намагаємося дістатися певного URL, якого сервер не може знайти. Приклади корисних кодів:

- `200` OK (добре)
- `301` Moved Permanently (переміщено назавжди)
- `302` Found (знайдено)
- `304` Not Modified (без змін)
- `401` Unauthorized (неавторизовано)
- `403` Forbidden (заборонено)
- `404` Not Found (не знайдено)
- `418` I'm a Teapot (я чайник)
- `500` Internal Server Error (внутрішня помилка сервера)
