# HTTP

В інтернеті для обміну інформацією із сайтом клієнтом і сервером використовуються протоколи HTTP та HTTPS. Ці протоколи знаходяться на прикладному рівні за моделлю TCP/IP і описують, у якому форматі надсилаються запити, і що очікується у відповідь. Для роботи з сайтами використовуються два основні протоколи

-   HTTP (HyperText Transfer Protocol) — протокол передачі гіпертексту
-   HTTPS (HyperText Transfer Protocol Secure) — захищений протокол передачі гіпертексту

## Застосування HTTP

-   Робота з формами, завантаження файлів, перенаправлення
-   Аутентифікація
-   Вилучення інформації про запит (наприклад, визначення браузера, з якого було виконано запит)
-   Збільшення продуктивності (кешування)
-   Забезпечення безпеки (HTTPS)

## HTTP запит

HTTP-запит — це дія, яка має бути виконана над ресурсом. Давайте розглянемо простий HTTP-запит

```
GET /search?q=як+приготувати+торт HTTP/1.1
Host: google.com
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.5112.124 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9
Accept-Encoding: gzip, deflate, br
```

У першому рядку HTTP-запиту міститься метод, який використовується - у даному випадку це GET. Далі вказується шлях запиту - /search. Сервер зберігає вміст всієї веб-програми, тому для того, щоб браузер міг завантажити потрібну сторінку, потрібно вказати саме її шлях. Далі в запиті йде пошуковий запит: «Як приготувати торт». На кінець рядка вказано версію протоколу, яка використовується - HTTP/1.1.

У другому рядку вказується домен URL-адреси, на яку надсилається запит. Це особливо важливо у випадку, коли на сервері зберігається контент для кількох веб-застосунків.

У третьому рядку вказується, який User-Agent використовується. Це дозволяє ідентифікувати користувача, який надіслав запит.

У четвертому рядку вказані дозволені типи даних, які ми готові отримати.

### HTTP методи

HTTP визначає різні методи запиту і кожному призначається конкретна мета. Кожен метод запиту визначає окрему дію

-   GET — запит на отримання інформації із сервера
-   HEAD — запит для перевірки, чи оновилася інформація на сервері і чи варто заново її завантажити або можна залишити закешовану версію
-   OPTIONS — запит для перевірки, які запити можна робити на цей ресурс
-   POST — запит на створення нового запису на сервері
-   PUT — запит на перезапис наявної інформації на сервері
-   DELETE — запит на видалення наявної інформації на сервері
-   PATCH — запит на частковий перезапис наявної інформації на сервері

### URL

URL (Uniform Resource Locator / Уніфікований локатор ресурсів) — це адреса, яка ідентифікує ресурс в Інтернеті. Кожна складова адреси містить інформацію про цей ресурс. Наприклад, розглянемо адресу `https://blog.my-site.com:8080/search/?q=honey&key=value#second`

-   href — це повна адреса, що включає протокол, домен, порт, шлях до ресурсу, параметри запиту та фрагмент сторінки
-   origin — це складова адреси, яка включає протокол, домен та порт
-   protocol — вказує на протокол, який використовується для з'єднання з сервером (наприклад, HTTP або HTTPS)
-   host — вказує на домен, на якому розміщений ресурс
-   port — вказує на порт, який використовується для з'єднання з сервером
-   pathname — вказує на шлях до ресурсу на сервері
-   search — це рядок запиту, який містить параметри запиту у вигляді пар ключ-значення, розділених символом "&"
-   hash — це ідентифікатор фрагмента сторінки, до якого потрібно прокрутити користувача

Отже, в даному прикладі `https` є протоколом зв'язку, `blog.my-site.com` — доменом, `8080` — портом, `search` — шляхом до ресурсу, `q=honey&key=value` — параметрами запиту, а `second` — ідентифікатором фрагмента сторінки

## HTTP відповідь

HTTP-відповідь — це те, що клієнт отримує від сервера у відповідь на свій HTTP-запит. Мета HTTP-відповіді полягає в наданні клієнту запитаного ресурсу, повідомлення про те, що дія була успішно виконана, або про помилку.

```
HTTP/1.1 200 OK
Last-Modified: Sun, 07 Jul 2022 13:10:10 GMT
Connection: Keep-Alive
Content-Type: text/html; charset=UTF-8
Content-Length: 208

<!doctype html>
<html>
<body>
```

У першому рядку HTTP-відповіді міститься версія протоколу, вибрана сервером на основі запиту клієнта, а також код стану та короткий опис. У даному випадку код стану 200 означає успішне завершення запиту, а слово "OK" — короткий опис стану.

У другому рядку вказується заголовок Last-Modified, який містить дату та час останньої зміни документа на сервері. Це дозволяє браузеру кешувати документ та зменшувати кількість запитів до сервера, якщо документ не змінився.

У третьому рядку вказується заголовок Connection, який повідомляє браузеру, як тримати відкритим з'єднання з сервером. У даному випадку значення Keep-Alive вказує на те, що з'єднання повинно залишатися відкритим для наступних запитів.

У четвертому рядку вказується заголовок Content-Type, який повідомляє браузеру, який тип документа він відправляє назад. У даному випадку значення text/html вказує на те, що документ є HTML-файлом, а charset=UTF-8 вказує на кодування символів.

У п'ятому рядку вказується заголовок Content-Length, який інформує браузер про довжину документа в байтах, що допомагає браузеру розрахувати час завантаження файлу.

У кінці відповіді йде тіло запиту, яке міститься між тегами <html> та <body>. У даному випадку це простий HTML-файл.

### Коди відповіді HTTP

-   Інформаційні (100-199)
-   Успішні (200-299)
-   Перенаправлення (300-399)
-   Клієнтські помилки (400—499)
-   Серверні помилки (500-599)

## Заголовки HTTP

Заголовки HTTP — основна частина протоколу HTTP. Вони дозволяють клієнтам та серверам передавати додаткову інформацію разом із даними другій стороні. Завдяки цьому клієнти та сервери можуть правильно отримувати та обробляти дані. Наприклад, заголовки HTTP можуть включати інформацію про розмір (Content-Length) та тип (Content-Type) даних у тілі HTTP-повідомлення. Заголовки HTTP містять текстову інформацію у формі ключ-значення та включаються до кожного HTTP-запиту та відповіді. Складається з назва класу даних (top-level type name) та назва типу даних (subtype name)

-   text/html
-   application/json
-   image/jpeg
-   multipart/form-data
-   script/javascript

### Content-Type

Media Type (також відомий як MIME type) надсилається в HTTP заголовку Content-Type. Цей заголовок передає інформацію про тип вмісту (наприклад, текстовий файл або зображення) та формат, в якому цей вміст представлений (наприклад, HTML або JPEG)

## HTTPS

У HTTP запиті та відповіді дані надсилаються у відкритому вигляді. У результаті можна побачити, які дані були надіслані та отримані. Все це не зашифровано. Тому така передача даних ненадійна для конфіденційної інформації, наприклад ваших паспортних даних.

Протокол HTTPS доповнив протокол HTTP шляхом додавання SSL/TLS шифрування запитів та відповідей, що зробило його стандартом практично для будь-якого сайту в інтернеті. Сайти вже давно не є просто засобом отримання інформації, оскільки ми передаємо через них свої дані, тому необхідна надійна захист.

### HTTPS гарантує

- Конфіденційність. З'єднання відвідувача зашифровано, що приховує URL-адреси, файли cookie та інші конфіденційні метадані
- Справжність. Відвідувач спілкується із «справжнім» веб-сайтом, а не з імітатором чи через посередника
- Чесність. Дані, що надсилаються між відвідувачем та веб-сайтом, не були підроблені або змінені



