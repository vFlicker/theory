# DNS (Domain Name System / Система доменних імен)

З кожним днем кількість комп'ютерів у мережі збільшується, тому IP-адрес стандарту IPv4 може не вистачити. Стандарт IPv6 вигадали, щоб вирішити цю проблему. Але зі збільшенням числа адрес в ARPANet почали замислюватися, як і де зберігати стільки адрес.

Коли ARPANet налічувала не більше 50 комп'ютерів, користувачі мережі зберігали їх у звичайних блокнотах, як у телефонних книгах. Комп'ютерна мережа набирала популярності, і зростала кількість комп'ютерів. Виявилось, що зберігати адреси у блокнотах незручно. Також адреса могла змінитися, що теж потрібно було зафіксувати.

Щоб не ускладнювати життя користувачам, інженери ARPANet вигадали системи зберігання

-   Файл hosts.txt
-   DNS

## Файл hosts.txt

У файлі hosts.txt описується структура виду IP-адреси — ім'я комп'ютера

```
# Адреса для звернення комп'ютера до себе
127.0.0.1      localhost

# Адреси комп'ютерів Google в мережі
216.239.35.0   Google.com
```

Такий запис вирішив дві проблеми

-   Користувачам не потрібно зберігати адреси комп'ютерів у мережі самостійно
-   Комп'ютери отримали зручні імена звернення. Наприклад, адрес 216.239.35.0 замінилися на Google.com

Якщо адреса комп'ютера змінювалась, то оновлювали файл hosts.txt і не запам'ятовували, яку адресу комп'ютера тепер.

Файл зберігався на одному з комп'ютерів ARPANet, і користувачі самостійно оновлювали його на своєму пристрої один раз на два тижні. Це було зручніше, ніж записувати до блокноту. Але кількість користувачів зростала, і система зберігання адрес hosts.txt ставала складною і незручною.

## DNS

Заміною файлу hosts.txt стала система доменних імен або DNS (Domain Name System) — автоматизований сервіс, який зберігає адреси та імена комп'ютерів у мережі.

Завдання DNS — повернути IP-адресу комп'ютера на ім'я. Тепер не потрібно надавати та оновлювати адреси для кожного комп'ютера в мережі вручну. DNS стала великою базою даних, яка допомагає комп'ютерам у мережі спілкуватися один з одним. Комп'ютер, де знаходиться сервіс DNS, називається DNS-сервер. Сервіс може працювати всередині локальної та глобальної мереж. Коли комп'ютер надсилає повідомлення на інший пристрій, запитує IP-адресу одержувача у DNS-сервера.

Так як пристроїв в мережі багато, а кількість сайтів майже два мільярди, зберігати всі дані на одному DNS-сервері неможливо. Він не витримає такого навантаження.

DNS-сервер, відповідальний за зберігання та підтримку в актуальному стані записів про свої дочірні домени. Кожен DNS-сервер відповідальний лише за свою зону, тобто DNS-сервер `.ua` знає, де розташований домен `my-site.ua`, DNS-сервер якого знає про розташування своїх піддоменів. Можливі два варіанти підключення, їх схема роботи виглядає так

1. Комп'ютер надсилає запит на відомий йому DNS-сервер. Найчастіше ним є DNS-сервер провайдера. DNS провайдер знаходить у своїй базі інформацію, що необхідний домен знаходиться за такою IP-адресою і повертає його комп'ютеру
2. Якщо найближчий DNS-сервер не має інформації про те, за якою IP-адресою міститься домен `m.my-site.ua`
    1. Надходить запит на кореневий DNS-сервер
    2. Кореневий DNS-сервер, знає про те, де розташовуються DNS-сервер доменів першого (верхнього) рівня. Ці адреси повертаються DNS-серверу нашого провайдера, після чого на потрібний DNS-сервер (у нашому випадку `.ua`), надсилається запит на отримання IP-адреси домену `m.my-site`
    3. DNS-сервер домену верхнього рівня повертає IP-адресу DNS-сервера домену `my-site`, на який надсилається запит на отримання IP-адреси піддомену `m`
    4. DNS-сервер повертає IP-адреси піддомена `m`, після чого DNS-сервер нашого провайдера повертає отриману адресу на наш комп'ютер, який може звернутися до домену `m.my-site.ua` за його IP-адресою

<figure>
    <img src="./_images/DNS.jpg" style="width: 700px" />
    <figcaption>Розбиття DNS-сервера за рівнями</figcaption>
</figure>
