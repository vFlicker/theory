# Декоратори

Декоратор — це обгортка навколо функції, яка змінює її поведінку, не змінюючи основну роботу функції. Основна функція залишається незмінною, і декоратори надають можливість додавати додатковий функціонал до неї.

## Основні поняття

- Декоратори дозволяють додавати «аспекти» до функцій, не змінюючи їхньої реалізації.
- Оригінальну функцію можна безпечно замінити декорованою версією, за винятком властивостей, які можуть бути втрачені. Наприклад, `func.calledCount` не буде доступний у декорованій функції.
- Декоратори можуть додавати різні можливості, такі як кешування результатів, логування, обробку виключень тощо.

## Приклад декоратора для кешування результатів функції

```js
const worker = {
  someMethod() {
    return 2;
  },

  slow(...args) {
    // Тут може бути тяжка обчислювальна задача
    console.log(`Called with ${args}`);
    return args.reduce((acc, item) => acc + item, 0) * this.someMethod();
  },
};

const hash = (args) => {
  return args.join(",");
};

const cachingDecorator = (func, hash) => {
  const cache = new Map();

  return function (...args) {
    const key = hash(args);

    if (cache.has(key)) {
      return cache.get(key);
    }

    const result = func.apply(this, args); // Явно передаємо контекст
    cache.set(key, result);
    return result;
  };
};

console.log(worker.slow(3, 5)); // Оригінальна функція працює
worker.slow = cachingDecorator(worker.slow, hash); // Тепер робимо її кешованою
console.log("Again " + worker.slow(3, 5));
```

У цьому прикладі `cachingDecorator` додає можливість кешування результатів функції `worker.slow`, що дозволяє підвищити її продуктивність, запам'ятовуючи результати викликів і використовуючи їх при повторних викликах з тими самими аргументами.
